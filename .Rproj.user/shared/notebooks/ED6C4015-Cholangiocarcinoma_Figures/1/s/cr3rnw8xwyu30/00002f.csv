"0","# Combine Cancer_Status and ALAN Score to create six categories"
"0","cca_df$Group <- with(cca_df, paste(Cancer_Status, Prognostic_Score_ALAN_category, sep = ""_""))"
"0",""
"0","# Perform survival analysis for each category"
"0","kmfit_group <- survfit(Surv(time = time_diff_months, event = Event_Status) ~ Group, data = cca_df)"
"0",""
"0","# Calculate p-values and hazard ratios between groups"
"0","coxph_group <- coxph(Surv(time_diff_months, Event_Status) ~ Group, data = cca_df)"
"0","summary_coxph <- summary(coxph_group)"
"0",""
"0","# Extract p-values and hazard ratios"
"0","p_values <- summary_coxph$coefficients[, ""Pr(>|z|)""]"
"0","hazard_ratios <- exp(summary_coxph$coefficients[, ""coef""])"
"0",""
"0","# Get the population size for each group"
"0","population_sizes <- table(cca_df$Group)"
"0",""
"0","# Create legend labels with population size"
"0","legend_labels <- paste("
"0","  c(""NPT- CCA; ALAN Score = 0"", ""NPT- CCA; ALAN Score = 1-2"", ""NPT- CCA; ALAN Score = 3-4"", "
"0","    ""Resistant- CCA; ALAN Score = 0"", ""Resistant- CCA; ALAN Score = 1-2"", ""Resistant- CCA; ALAN Score = 3-4""),"
"0","  "": (N ="", population_sizes, "")"""
"0",")"
"0",""
"0","# Create Kaplan-Meier plot"
"0","kmplot_group <- ggsurvplot("
"0","  kmfit_group,"
"0","  data = cca_df,"
"0","  pval = TRUE,"
"0","  title = ""Kaplan Meier Curve of Advanced Intrahepatic Cholangiocarcinoma Survival by Prior Treatment and ALAN Score"","
"0","  censor = TRUE,"
"0","  xlab = ""Time (Months)"","
"0","  ylab = ""Survival Probability"","
"0","  ggtheme = theme_minimal(),"
"0","  surv.median.line = ""hv"","
"0","  break.time.by = 12,"
"0","  risk.table = TRUE,"
"0","  surv.scale = ""percent"","
"0","  legend.labs = legend_labels, # Use the modified legend labels"
"0","  palette = ""lancet"""
"0",") "
"2","Warning: [38;5;232mAll aesthetics have length 1, but the data has 6 rows.
[36mâ„¹[38;5;232m Did you mean to use `annotate()`?[39m"
"0","# Customize legend appearance"
"0","kmplot_group <-  kmplot_group + ggsurvfit::theme_ggsurvfit_KMunicate("
"0",")"
"0",""
"0","# Display the plot"
"0","kmplot_group"
"2","Warning: [38;5;232mAll aesthetics have length 1, but the data has 6 rows.
[36mâ„¹[38;5;232m Did you mean to use `annotate()`?[39m"
"2","Warning: [38;5;232mAll aesthetics have length 1, but the data has 6 rows.
[36mâ„¹[38;5;232m Did you mean to use `annotate()`?[39m"
"2","Warning: [38;5;232mAll aesthetics have length 1, but the data has 6 rows.
[36mâ„¹[38;5;232m Did you mean to use `annotate()`?[39m"
